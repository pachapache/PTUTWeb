<%@page contentType="text/html" pageEncoding="UTF-8"%>

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/bootstrap.min.css">
  <script type="text/javascript" src="./js/jquery.min.js"></script>
  <script type="text/javascript" src="./js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <title>E-breath</title>

  <script>
  $(document).ready(function(){
var timerIn = 200;
var timerOut = 200;
var myFqRespiratoire = ${valeur};

$('ul.nav li.dropdown').hover(function() {
    $(this).find('> .dropdown-menu').stop(true, true).fadeIn(timerIn);
    $(this).addClass('open');
}, function() {
    $(this).find('> .dropdown-menu').stop(true, true).fadeOut(timerOut);
    $(this).removeClass('open');
});

google.charts.load('current', {'packages':['gauge']});
     google.charts.setOnLoadCallback(drawChart);

     function drawChart() {
       var data = google.visualization.arrayToDataTable([
         ['Label', 'Value'],
         ['Fq Respiratoire', myFqRespiratoire],
       ]);
       var options = {
          width: 500, height: 440,
          greenFrom:12, greenTo:18,
          redFrom: 18, redTo: 20,
          max: 20,
          min:5,
          minorTicks: 5
        };
       var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
       chart.draw(data, options);

       /*setInterval(function() { // temps d'interval entre chaque
       data.setValue(Math.floor((Math.random()*25)+1);
         chart.draw(data, options);
     }, 13000);*/
     }
});
</script>
</head>

<body>

  <!-- Barre de menus -->
  <nav class="navbar navbar-inverse">
    <h1 align="center"><font color="white">E-Breath</font></h1>
    <h2 align="center"><font color="white">${ sessionScope.nom } ${ sessionScope.prenom}</font></h2>
    <div class="container-fluid">
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="Accueil">Accueil</a></li>
          <li><a href="Projet">Projet</a></li>
          <li class="active"><a href="Frequence">Ma fréquence actuelle</a></li>
          <li><a href="Historique">Historique</a></li>
          <li><a href="Jeux">Jeux de respiration</a></li>
          <li><a href="Param">Paramètres du compte</a></li>
        </ul>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="Deconnexion">Se deconnecter</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Frequence actuelle -->
<div class="container">
  <div class="row">
    <div class="col-xs-12 col-xs-offset-4">
      <div id="chart_div" style="width: 400px; height: 1200px"></div>
    </div>
  </div>
</div>


</body>

<footer align="center">
  Copyright© 2017 - Team E-Breath - Tous droits réservés.
</footer>

</html>
